<html>
    <head>
        <meta charset="utf-8">
        <meta http-eqiv="x-UA-Compaible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title></title>
        <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
        <script src="js/jquery-3.4.1.min.js"></script>
        <script src="bootstrap/js/bootstrap.min.js"></script>
        <link rel="stylesheet" href="./5simuStyle.css">
    </head>

    <body onload="stackframe();drawsf1();drawmainG();">
        <!---導覽列選項--->
        <nav class="navbar navbar-expand-sm bg-light">
            <img id="logo" src="./javalogo.png" alt="logo"><span>Java Function</span>
            <button class="navbar-toggler border-light bg-light" type="button" 
	          data-toggle="collapse" data-target="#navbarNavDropdown" 
	          aria-controls="navbarNavDropdown" aria-expanded="false" 
			  aria-label="Toggle navigation">
		        <span class="navbar-toggler-icon"></span>
	        </button>
            <ul class="navbar-nav">
                <li class="nav-item"><a class="nav-link" href="./1-1(主頁)認識函數.html">概念</a></li>
                <li class="nav-item"><a class="nav-link" href="./2-1函式定義.html">定義</a></li>
                <li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">呼叫</a>
                    <ul class="dropdown-menu"  aria-labelledby="navbarDropdown">
                        <li><a class="dropdown-item" href="./3-1函式呼叫.html">函式呼叫</a></li>
                        <li><a class="dropdown-item" href="./3-2傳值呼叫與傳址呼叫.html">傳值呼叫與傳址呼叫</a></li>
                        <li><a class="dropdown-item" href="./3-3傳陣列.html">傳陣列呼叫</a></li>
                    </ul>
                </li>
                <li class="nav-item"><a class="nav-link" href="./4-1控制權的概念.html">控制權轉移</a></li>
                <li class="nav-item"><a class="nav-link" href="./5-1函式呼叫模擬.html">模擬</a></li>
                <li class="nav-item"><a class="nav-link" href="./6-1測驗.html">測驗</a></li>
            </ul>
            <!--導覽列的搜尋列-->
            <form class="navSearch">
                <input class="form-control mr-sm-2" type="search" placeholder="找不到東西的搜尋列" />
                <button><i class="fas fa-search" id="searchbutton"></i>Search</button>
            </form>
        </nav>
        
        <h1>函式呼叫模擬</h1>
        <div id="btngroup">
            <button class="simbtn" onclick="shdiv1();">最大公因數與最小公倍數</button>
            <button class="simbtn">費伯納係數</button>
            <button class="simbtn" onclick="shBMI();">BMI</button>
            <button class="simbtn" onclick="shd();">質因數分解</button>
        </div>
        
        <div class="num">
            <table border=1>
                <tr>
                    <td width=600>
                        <h4>主程式</h4>
                    </td>
                    <!-- <td width=300>
                        <h4>方法</h4>
                    </td> -->
                    <td>
                        <h4>Stack Frame模擬</h4>
                    </td>
                    <td width=400>
                        <h4>執行結果</h4>
                    </td>
                </tr>
                <tr>
                  <td rowspan="2">
                    <canvas id='mainG' height=400 width=600></canvas>
                    
                    <div class="btngroupChoose">
                        i=<input type='number' class='usin' id='ii' size=1>
                        j=<input type='number' class='usin' id='ij' size=1><br>
                        <button onclick="simu();stop();linkCanvas();">Step By Step</button>
                        <button onclick='simu();auto();'>Auto</button>
                        <!-- <button onclick="check();" style="display: none;" class="ckbtn" onclick="txtin1();">Check Answer</button> -->
                    </div>
                  </td>

                  <td rowspan="2" width=400>
                    <p>
                        <canvas id="sf" height="500"></canvas>
                      </p>
                  </td>
                  <td>
                    <p>當前步驟<br><span id="curStep"></span></p>
                    <textarea id="showdetail" disabled='true' style='resize:none;width: 400px;height: 150px;'></textarea>
                  </td>
                  
                </tr>
                <tr>
                    
                    <td class="sr" height=300>
                        <p id='out1' style='visibility:hidden'>i is <input type="text" disabled="true" id="siv1" size=1></p>
                        <p id='out2' style='visibility:hidden'>j is <input type="text" disabled="true" id="sjv1" size=1></p>
                        <p id='out3' style='visibility:hidden'>The Maxium of <input type="text" disabled="true" id="siv2" size=1>&nbsp;and&nbsp;<input type="text" disabled="true" id="sjv2" size=1>&nbsp;is&nbsp;<input type="text" disabled="true" id="slv" size=1></p>
                        <p id='out4' style='visibility:hidden'>The GCD of <input type="text" disabled="true" id="siv3" size=1>&nbsp;and&nbsp;<input type="text" disabled="true" id="sjv3" size=1>&nbsp;is&nbsp;<input type="text" disabled="true" id="sgcd" size=1></p>
                        <p id='out5' style='visibility:hidden'>The LCM of <input type="text" disabled="true" id="siv4" size=1>&nbsp;and&nbsp;<input type="text" disabled="true" id="sjv4" size=1>&nbsp;is&nbsp;<input type="text" disabled="true" id="slcm" size=1></p>
                      </td>
                </tr>
            </table>
        </div>
        <div id="fab">

        </div>
        <div class="textinput" style="display: none;">
            <iframe src="./5-11simuBMI.html"  width="100%" height="580" frameBorder="0"></iframe>
            
        </div>
        <div class="primeFac" style='display: none;'>
            <iframe src="./5-14質因數分解.html" width="100%" height="500"  frameBorder="0"></iframe>
        </div>
        
        
    </body>


    <script>
        var sec=0;
        var timer;
        var ctx=document.getElementById("sf").getContext("2d");
        stackFunArr=["System.out..(The LCM..);","LCM(i,j,gcd(i,j))","System.out..(The GCD..);","GCD(i,j)","System.out..(The Maxium..);"];
        stepArr=['程式執行，尋找進入點main method','使用者輸入i','執行結果show出i輸入','使用者輸入j','執行結果show出j輸入','輸出壓入堆疊','傳值呼叫函式max','複製i的值，到x的記憶體'
        ,'複製j的值到y到j的記憶體','控制權轉移到max函式','比較x,y值並回傳最大的數給主程式','程式執行結束，控制權轉移回主程式','pop出堆疊裡尚未完成的程式','螢幕輸出兩數傳入的最大值'
        ,'輸出壓入(push)堆疊','傳值呼叫gcd函式','複製i的值到x記憶體','複製j的值到y記憶體','控制權轉移至gcd函式','經過迴圈得到gcd值(放y變數)，回傳主程式此函式得到的最終結果'
        ,'函式執行結束，控制權轉移回主程式','彈出(pop)堆疊中未完成的程式繼續執行，螢幕輸出傳入兩數的gcd結果','輸出壓入(push)堆疊','複製i的值到x記憶體'
        ,'複製j的值到y記憶體','遇到gcd函式，需先執行完gcd函式才能執行lcm函式，所以lcm函式壓入堆疊','傳值呼叫gcd函式','複製i的值到x記憶體'
        ,'複製j的值到y記憶體','控制權轉移至gcd函式','經過迴圈得到gcd值(放y變數)，回傳主程式此函式得到的最終結果','函式執行結束，控制權轉移回主程式','彈出(pop)堆疊中未完成的程式繼續執行，傳值呼叫lcm函式'
        ,'複製gcd函式回傳的值(結果)至變數g的記憶空間','經過計算求得lcm結果，回傳結果回主程式','lcm函式執行結束，控制權轉移回主程式','從堆疊中pop出未完成的部分，螢幕輸出','主程式執行結束'];
        var gtx=document.getElementById('mainG').getContext('2d');
        var str="";
        var ta=document.getElementById('showdetail');

        function shdiv1(){
            // document.querySelector('.ckbtn').style.display="none";
            document.querySelector('.num').style.display='inline';
            document.querySelector('.primeFac').style.display='none';
            document.querySelector('.textinput').style.display='none';
        }
        
        function shBMI(){
            // document.querySelector('.ckbtn').style.display="inline";
            document.querySelector('.num').style.display='none';
            document.querySelector('.primeFac').style.display='none';
            document.querySelector('.textinput').style.display='block';
        }
        
        function simu(){
            
            if(document.getElementById("ii").value==""||document.getElementById("ij").value==""||document.getElementById("ii").value==null||document.getElementById("ij").value==null){
                alert('未輸入數值');
            }else{
                var i=parseInt(document.getElementById("ii").value);
                var j=parseInt(document.getElementById("ij").value);
                document.getElementById("siv1").value=i;
                document.getElementById("siv2").value=i;
                document.getElementById("siv3").value=i;
                document.getElementById("siv4").value=i;

                document.getElementById("sjv1").value=j;
                document.getElementById("sjv2").value=j;
                document.getElementById("sjv3").value=j;
                document.getElementById("sjv4").value=j;

                document.getElementById("slv").value=max(i,j);
                document.getElementById("sgcd").value=gcd(i,j);
                document.getElementById("slcm").value=lcm(i,j,gcd(i,j));
                
            }
        }

        function max(x, y){
            if(x>y){
                return x;
            }else{
                return y;
            }
        }

        function gcd(x,y){
            
            while(x!=0){
                if(x<y){
                    var temp=x;
                    x=y;
                    y=temp;
                }
                if(x%y==0){
                    return y;
                }else{
                    x=x%y;
                }

            }
            return y;
        }

        function lcm(x,y,g){
            x=x/g;
            y=y/g;
            return x*y*g;
        }

        function auto(){
            timer=window.setInterval("linkCanvas()",1000)
        }

        function stop(){
            clearInterval(timer);
        }

// 程式canvas
        function drawmainG(){
            gtx.font='15px sans-serif';
            gtx.fillText('public static void main(String []args){',10,15);
            gtx.fillText('int i=           ;',25,30);
            gtx.fillText('System.out.println("i is "+i);',25,45);
            gtx.fillText('int j=           ;',25,60);
            gtx.fillText('System.out.println("j is "+j);',25,75);
            gtx.fillText('System.out.println("The Maxium of "+i+" and "+j+" is "+max(i,j));',25,90);
            gtx.fillText('System.out.println("The GCD of "+i+" and "+j+" is "+gcd(i,j));',25,105);
            gtx.fillText('System.out.println("System.out.println("The LCM of "+i+" and "+j+" is "+lcm(i,j,gcd(i,j)));',25,120);
            gtx.fillText('}',10,135);

            gtx.fillText('public static int max (int x,int y){',10,200);
            gtx.fillText('if(x > y){',25,215);
            gtx.fillText('return x;',40,230);
            gtx.fillText('}else{',25,245);
            gtx.fillText('return y;',40,260);
            gtx.fillText('}',25,275);
            gtx.fillText('}',10,290);
            
            gtx.fillText('public static int gcd (int x,int y){',270,200);
            gtx.fillText('while(x!=0){',285,215);
            gtx.fillText('if(x < y ) {',300,230);
            gtx.fillText('int temp=x;',315,245);
            gtx.fillText('x=y;',315,260);
            gtx.fillText('y=temp;',315,275);
            gtx.fillText('}',300,290);
            gtx.fillText('x=x%y;',300,305);
            gtx.fillText('}',285,310);
            gtx.fillText('return y;',285,325);
            gtx.fillText('}',270,340);

            gtx.fillText('public static int lcm (intx,int y,int g){',10,320);
            gtx.fillText('x=x%g;',25,335);
            gtx.fillText('y=y%g;',25,350);
            gtx.fillText('return x*y*g ;',25,365);
            gtx.fillText('}',10,380);
        }

        function stackframe(){
            ctx.beginPath();
            ctx.moveTo(40,50);
            ctx.lineTo(40,400);
            ctx.lineTo(250,400);
            ctx.lineTo(250,50);
            ctx.stroke();
            ctx.closePath();
        }

        function drawsf1(){
            ctx.clearRect(0,0,document.getElementById('sf').width, document.getElementById('sf').height);
            ctx.fillStyle="rgba(208,155,200,0.7)";
            ctx.font="15px sans-serif";
            var colorindex=0;
            if((sec%38>=5)&&(sec%38<=11)){
                ctx.fillRect(40,360,210,35);
                ctx.fillStyle="black";
                ctx.fillText('System.out..(The Maxium..);',50,385);
            }
            if((sec%38>=14)&&(sec%38<=20)){
                ctx.fillRect(40,360,210,35);
                ctx.fillStyle="black";
                ctx.fillText('System.out..(The GCD of..);',50,385);
            }
            if((sec%38>=22)&&(sec%38<=35)){
                ctx.fillRect(40,360,210,35);
                ctx.fillStyle="black";
                ctx.fillText('System.out..(The LCM of..);',50,385);
                if((sec%38>=25)&&(sec%38<=31)){//lcm壓入堆疊
                    ctx.fillStyle="rgba(233,229,155,0.7)";
                    ctx.fillRect(40,320,210,35);
                    ctx.fillStyle="black";
                    ctx.fillText('lcm(i,j,gcd(i,j))',50,345);
                }
            }
            stackframe();
        }

        function shd(){
            document.querySelector('.primeFac').style.display='block';
            document.querySelector('.num').style.display='none';
            document.querySelector('.textinput').style.display='none';
        }

        
        function linkCanvas(){
            switch(sec%38){
                case 0:
                    // 文字
                    document.getElementById('curStep').innerHTML=stepArr[sec%38];
                    str+=stepArr[sec%38]+'\n';
                    ta.value=str;
                    //Code
                    gtx.clearRect(0,0,document.getElementById('mainG').width, document.getElementById('mainG').height);
                    gtx.fillStyle = "rgba(169,255,20,0.5)";
                    gtx.fillRect(5,5,600,140);
                    gtx.fillStyle = "black";
                    drawmainG();
                    break;
                case 1:
                    // 文字
                    document.getElementById('curStep').innerHTML=stepArr[sec%38];
                    str+=stepArr[sec%38]+'\n';
                    ta.value=str;
                    //Code
                    gtx.clearRect(0,0,document.getElementById('mainG').width, document.getElementById('mainG').height);
                    gtx.fillStyle = "rgba(169,255,20,0.5)";
                    gtx.fillRect(10,15,100,20);
                    gtx.fillStyle = "red";
                    gtx.fillText(document.getElementById('ii').value,60,30);
                    gtx.fillStyle = "black";
                    drawmainG();
                    break;
                case 2:
                    document.getElementById('curStep').innerHTML=stepArr[sec%38];
                    str+=stepArr[sec%38]+'\n';
                    ta.value=str;
                    document.getElementById("out1").style.visibility='visible';
                    //Code
                    gtx.clearRect(0,0,document.getElementById('mainG').width, document.getElementById('mainG').height);
                    gtx.fillStyle = "rgba(169,255,20,0.5)";
                    gtx.fillRect(10,30,200,20);
                    gtx.fillStyle = "red";
                    gtx.fillText(document.getElementById('ii').value,60,30);
                    gtx.fillStyle = "black";
                    drawmainG();
                    break;
                case 3:
                    document.getElementById('curStep').innerHTML=stepArr[sec%38];
                    str+=stepArr[sec%38]+'\n';
                    ta.value=str;
                    //Code
                    gtx.clearRect(0,0,document.getElementById('mainG').width, document.getElementById('mainG').height);
                    gtx.fillStyle = "rgba(169,255,20,0.5)";
                    gtx.fillRect(10,45,100,20);
                    gtx.fillStyle = "red";
                    gtx.fillText(document.getElementById('ii').value,60,30);
                    gtx.fillText(document.getElementById('ij').value,60,60);
                    gtx.fillStyle = "black";
                    drawmainG();
                    break;
                case 4:
                    document.getElementById('curStep').innerHTML=stepArr[sec%38];
                    str+=stepArr[sec%38]+'\n';
                    ta.value=str;
                    document.getElementById("out2").style.visibility='visible';
                    //Code
                    gtx.clearRect(0,0,document.getElementById('mainG').width, document.getElementById('mainG').height);
                    gtx.fillStyle = "rgba(169,255,20,0.5)";
                    gtx.fillRect(10,60,200,20);
                    gtx.fillStyle = "red";
                    gtx.fillText(document.getElementById('ii').value,60,30);
                    gtx.fillText(document.getElementById('ij').value,60,60);
                    gtx.fillStyle = "black";
                    drawmainG();
                    drawsf1();
                    break;
                case 5:
                    document.getElementById('curStep').innerHTML=stepArr[sec%38];
                    str+=stepArr[sec%38]+'\n';
                    ta.value=str;
                    //Code
                    gtx.clearRect(0,0,document.getElementById('mainG').width, document.getElementById('mainG').height);
                    gtx.fillStyle = "rgba(169,255,20,0.5)";
                    gtx.fillRect(10,75,500,20);
                    gtx.fillStyle = "red";
                    gtx.fillText(document.getElementById('ii').value,60,30);
                    gtx.fillText(document.getElementById('ij').value,60,60);
                    gtx.fillStyle = "black";
                    drawmainG();
                    drawsf1();
                    break;
                case 6:
                    document.getElementById('curStep').innerHTML=stepArr[sec%38];
                    str+=stepArr[sec%38]+'\n';
                    ta.value=str;
                    //Code
                    gtx.clearRect(0,0,document.getElementById('mainG').width, document.getElementById('mainG').height);
                    gtx.fillStyle = "rgba(169,255,20,0.5)";
                    gtx.fillRect(385,75,70,20);
                    gtx.fillRect(10,180,230,110);
                    gtx.fillStyle = "red";
                    gtx.fillText(document.getElementById('ii').value,60,30);
                    gtx.fillText(document.getElementById('ij').value,60,60);
                    gtx.fillStyle = "black";
                    drawmainG();
                    drawsf1();
                    break;
                case 7:
                    document.getElementById('curStep').innerHTML=stepArr[sec%38];
                    str+=stepArr[sec%38]+'\n';
                    ta.value=str;
                    //Code
                    gtx.clearRect(0,0,document.getElementById('mainG').width, document.getElementById('mainG').height);
                    gtx.fillStyle = "rgba(169,255,20,0.5)";
                    gtx.fillRect(420,75,5,20);
                    gtx.fillRect(150,185,30,20);
                    gtx.fillStyle = "red";
                    gtx.fillText(document.getElementById('ii').value,60,30);
                    gtx.fillText(document.getElementById('ij').value,60,60);
                    gtx.fillStyle = "black";
                    drawmainG();
                    drawsf1();
                    break;
                case 8:
                    document.getElementById('curStep').innerHTML=stepArr[sec%38];
                    str+=stepArr[sec%38]+'\n';
                    ta.value=str;
                    //Code
                    gtx.clearRect(0,0,document.getElementById('mainG').width, document.getElementById('mainG').height);
                    gtx.fillStyle = "rgba(169,255,20,0.5)";
                    gtx.fillRect(430,75,5,20);
                    gtx.fillRect(180,185,30,20);
                    gtx.fillStyle = "red";
                    gtx.fillText(document.getElementById('ii').value,60,30);
                    gtx.fillText(document.getElementById('ij').value,60,60);
                    gtx.fillStyle = "black";
                    drawmainG();
                    drawsf1();
                    break;
                case 9:
                    document.getElementById('curStep').innerHTML=stepArr[sec%38];
                    str+=stepArr[sec%38]+'\n';
                    ta.value=str;
                    //Code
                    gtx.clearRect(0,0,document.getElementById('mainG').width, document.getElementById('mainG').height);
                    gtx.fillStyle = "rgba(169,255,20,0.5)";
                    gtx.fillRect(10,180,230,110);
                    gtx.fillStyle = "red";
                    gtx.fillText(document.getElementById('ii').value,60,30);
                    gtx.fillText(document.getElementById('ij').value,60,60);
                    gtx.fillStyle = "black";
                    drawmainG();
                    drawsf1();
                    break;
                case 10:
                    document.getElementById('curStep').innerHTML=stepArr[sec%38];
                    str+=stepArr[sec%38]+'\n';
                    ta.value=str;
                    //Code
                    gtx.clearRect(0,0,document.getElementById('mainG').width, document.getElementById('mainG').height);
                    gtx.fillStyle = "rgba(169,255,20,0.5)";
                    if(document.getElementById('ii').value>document.getElementById('ij').value){
                        gtx.fillRect(40,215,100,20);
                    }else{
                        gtx.fillRect(40,245,100,20);
                    }
                    gtx.fillStyle = "red";
                    gtx.fillText(document.getElementById('ii').value,60,30);
                    gtx.fillText(document.getElementById('ij').value,60,60);
                    gtx.fillStyle = "black";
                    drawmainG();
                    drawsf1();
                    break;
                case 11:
                    document.getElementById('curStep').innerHTML=stepArr[sec%38];
                    str+=stepArr[sec%38]+'\n';
                    ta.value=str;
                    //Code
                    gtx.clearRect(0,0,document.getElementById('mainG').width, document.getElementById('mainG').height);
                    gtx.fillStyle = "red";
                    gtx.fillText(document.getElementById('ii').value,60,30);
                    gtx.fillText(document.getElementById('ij').value,60,60);
                    gtx.fillStyle = "black";
                    drawmainG();
                    drawsf1();
                    break;
                case 12:
                    document.getElementById('curStep').innerHTML=stepArr[sec%38];
                    str+=stepArr[sec%38]+'\n';
                    ta.value=str;
                    //Code
                    gtx.clearRect(0,0,document.getElementById('mainG').width, document.getElementById('mainG').height);
                    gtx.fillStyle = "red";
                    gtx.fillText(document.getElementById('ii').value,60,30);
                    gtx.fillText(document.getElementById('ij').value,60,60);
                    gtx.fillStyle = "black";
                    drawmainG();
                    drawsf1();
                    break;
                case 13://螢幕輸出兩者最大
                    document.getElementById('curStep').innerHTML=stepArr[sec%38];
                    str+=stepArr[sec%38]+'\n';
                    ta.value=str;
                    document.getElementById("out3").style.visibility='visible';
                    //Code
                    gtx.clearRect(0,0,document.getElementById('mainG').width, document.getElementById('mainG').height);
                    gtx.fillStyle = "rgba(169,255,20,0.5)";
                    gtx.fillRect(10,75,500,20);
                    gtx.fillStyle = "red";
                    gtx.fillText(document.getElementById('ii').value,60,30);
                    gtx.fillText(document.getElementById('ij').value,60,60);
                    gtx.fillStyle = "black";
                    drawmainG();
                    drawsf1();
                    break;
                case 14:
                    document.getElementById('curStep').innerHTML=stepArr[sec%38];
                    str+=stepArr[sec%38]+'\n';
                    ta.value=str;
                    //Code
                    gtx.clearRect(0,0,document.getElementById('mainG').width, document.getElementById('mainG').height);
                    gtx.fillStyle = "rgba(169,255,20,0.5)";
                    gtx.fillRect(10,90,500,20);
                    gtx.fillStyle = "red";
                    gtx.fillText(document.getElementById('ii').value,60,30);
                    gtx.fillText(document.getElementById('ij').value,60,60);
                    gtx.fillStyle = "black";
                    drawmainG();
                    drawsf1();
                    break;
                case 15:
                    document.getElementById('curStep').innerHTML=stepArr[sec%38];
                    str+=stepArr[sec%38]+'\n';
                    ta.value=str;
                    //Code
                    gtx.clearRect(0,0,document.getElementById('mainG').width, document.getElementById('mainG').height);
                    gtx.fillStyle = "rgba(169,255,20,0.5)";
                    gtx.fillRect(260,190,210,160);
                    gtx.fillStyle = "red";
                    gtx.fillText(document.getElementById('ii').value,60,30);
                    gtx.fillText(document.getElementById('ij').value,60,60);
                    gtx.fillStyle = "black";
                    drawmainG();
                    drawsf1();
                    break;
                case 16:
                    document.getElementById('curStep').innerHTML=stepArr[sec%38];
                    str+=stepArr[sec%38]+'\n';
                    ta.value=str;
                    //Code
                    gtx.clearRect(0,0,document.getElementById('mainG').width, document.getElementById('mainG').height);
                    gtx.fillStyle = "rgba(169,255,20,0.5)";
                    gtx.fillRect(395,90,5,20);
                    gtx.fillRect(400,185,40,20);
                    gtx.fillStyle = "red";
                    gtx.fillText(document.getElementById('ii').value,60,30);
                    gtx.fillText(document.getElementById('ij').value,60,60);
                    gtx.fillStyle = "black";
                    drawmainG();
                    drawsf1();
                    break;
                case 17:
                    document.getElementById('curStep').innerHTML=stepArr[sec%38];
                    str+=stepArr[sec%38]+'\n';
                    ta.value=str;
                    //Code
                    gtx.clearRect(0,0,document.getElementById('mainG').width, document.getElementById('mainG').height);
                    gtx.fillStyle = "rgba(169,255,20,0.5)";
                    gtx.fillRect(405,90,5,20);
                    gtx.fillRect(440,185,40,20);
                    gtx.fillStyle = "red";
                    gtx.fillText(document.getElementById('ii').value,60,30);
                    gtx.fillText(document.getElementById('ij').value,60,60);
                    gtx.fillStyle = "black";
                    drawmainG();
                    drawsf1();
                    break;
                case 18://控制權轉移至gcd
                    document.getElementById('curStep').innerHTML=stepArr[sec%38];
                    str+=stepArr[sec%38]+'\n';
                    ta.value=str;
                    //Code
                    gtx.clearRect(0,0,document.getElementById('mainG').width, document.getElementById('mainG').height);
                    gtx.fillStyle = "rgba(169,255,20,0.5)";
                    gtx.fillRect(260,190,210,160);
                    gtx.fillStyle = "red";
                    gtx.fillText(document.getElementById('ii').value,60,30);
                    gtx.fillText(document.getElementById('ij').value,60,60);
                    gtx.fillStyle = "black";
                    drawmainG();
                    drawsf1();
                    break;
                case 19:
                    document.getElementById('curStep').innerHTML=stepArr[sec%38];
                    str+=stepArr[sec%38]+'\n';
                    ta.value=str;
                    //Code
                    gtx.clearRect(0,0,document.getElementById('mainG').width, document.getElementById('mainG').height);
                    gtx.fillStyle = "rgba(169,255,20,0.5)";
                    gtx.fillRect(260,310,210,20);
                    gtx.fillStyle = "red";
                    gtx.fillText(document.getElementById('ii').value,60,30);
                    gtx.fillText(document.getElementById('ij').value,60,60);
                    gtx.fillStyle = "black";
                    drawmainG();
                    drawsf1();
                    break;    
                case 20://控制權轉移
                    document.getElementById('curStep').innerHTML=stepArr[sec%38];
                    str+=stepArr[sec%38]+'\n';
                    ta.value=str;
                    //Code
                    gtx.clearRect(0,0,document.getElementById('mainG').width, document.getElementById('mainG').height);
                    gtx.fillStyle = "rgba(169,255,20,0.5)";
                    gtx.fillRect(5,5,600,140);
                    gtx.fillStyle = "red";
                    gtx.fillText(document.getElementById('ii').value,60,30);
                    gtx.fillText(document.getElementById('ij').value,60,60);
                    gtx.fillStyle = "black";
                    drawmainG();
                    drawsf1();
                    break;
                case 21://
                    document.getElementById('curStep').innerHTML=stepArr[sec%38];
                    str+=stepArr[sec%38]+'\n';
                    ta.value=str;
                    //Code
                    gtx.clearRect(0,0,document.getElementById('mainG').width, document.getElementById('mainG').height);
                    gtx.fillStyle = "red";
                    gtx.fillText(document.getElementById('ii').value,60,30);
                    gtx.fillText(document.getElementById('ij').value,60,60);
                    gtx.fillStyle = "black";
                    drawmainG();
                    drawsf1();
                    break;
                case 22:
                    document.getElementById('curStep').innerHTML=stepArr[sec%38];
                    str+=stepArr[sec%38]+'\n';
                    ta.value=str;
                    document.getElementById("out4").style.visibility='visible';
                    //Code
                    gtx.clearRect(0,0,document.getElementById('mainG').width, document.getElementById('mainG').height);
                    gtx.fillStyle = "rgba(169,255,20,0.5)";
                    gtx.fillRect(10,105,600,20);
                    gtx.fillStyle = "red";
                    gtx.fillText(document.getElementById('ii').value,60,30);
                    gtx.fillText(document.getElementById('ij').value,60,60);
                    gtx.fillStyle = "black";
                    drawmainG();
                    drawsf1();
                    break;
                case 23://複製i到lcm的x
                    document.getElementById('curStep').innerHTML=stepArr[sec%38];
                    str+=stepArr[sec%38]+'\n';
                    ta.value=str;
                    //Code
                    gtx.clearRect(0,0,document.getElementById('mainG').width, document.getElementById('mainG').height);
                    gtx.fillStyle = "rgba(169,255,20,0.5)";
                    gtx.fillRect(525,105,5,20);
                    gtx.fillRect(140,305,40,20);
                    gtx.fillStyle = "red";
                    gtx.fillText(document.getElementById('ii').value,60,30);
                    gtx.fillText(document.getElementById('ij').value,60,60);
                    gtx.fillStyle = "black";
                    drawmainG();
                    drawsf1();
                    break;
                case 24:
                    document.getElementById('curStep').innerHTML=stepArr[sec%38];
                    str+=stepArr[sec%38]+'\n';
                    ta.value=str;
                    //Code
                    gtx.clearRect(0,0,document.getElementById('mainG').width, document.getElementById('mainG').height);
                    gtx.fillStyle = "rgba(169,255,20,0.5)";
                    gtx.fillRect(535,105,5,20);
                    gtx.fillRect(170,305,40,20);
                    gtx.fillStyle = "red";
                    gtx.fillText(document.getElementById('ii').value,60,30);
                    gtx.fillText(document.getElementById('ij').value,60,60);
                    gtx.fillStyle = "black";
                    drawmainG();
                    drawsf1();
                    break;
                case 25://lcm壓入堆疊
                    document.getElementById('curStep').innerHTML=stepArr[sec%38];
                    str+=stepArr[sec%38]+'\n';
                    ta.value=str;
                    //Code
                    gtx.clearRect(0,0,document.getElementById('mainG').width, document.getElementById('mainG').height);
                    gtx.fillStyle = "red";
                    gtx.fillText(document.getElementById('ii').value,60,30);
                    gtx.fillText(document.getElementById('ij').value,60,60);
                    gtx.fillStyle = "black";
                    drawmainG();
                    drawsf1();
                    break;
                case 26:
                    document.getElementById('curStep').innerHTML=stepArr[sec%38];
                    str+=stepArr[sec%38]+'\n';
                    ta.value=str;
                    //Code
                    gtx.clearRect(0,0,document.getElementById('mainG').width, document.getElementById('mainG').height);
                    gtx.fillStyle = "rgba(169,255,20,0.5)";
                    gtx.fillRect(260,190,210,160);
                    gtx.fillStyle = "red";
                    gtx.fillText(document.getElementById('ii').value,60,30);
                    gtx.fillText(document.getElementById('ij').value,60,60);
                    gtx.fillStyle = "black";
                    drawmainG();
                    drawsf1();
                    break;
                case 27://gcd的i複製到x
                    document.getElementById('curStep').innerHTML=stepArr[sec%38];
                    str+=stepArr[sec%38]+'\n';
                    ta.value=str;
                    //Code
                    gtx.clearRect(0,0,document.getElementById('mainG').width, document.getElementById('mainG').height);
                    gtx.fillStyle = "rgba(169,255,20,0.5)";
                    gtx.fillRect(570,105,5,20);
                    gtx.fillRect(400,185,40,20);
                    gtx.fillStyle = "red";
                    gtx.fillText(document.getElementById('ii').value,60,30);
                    gtx.fillText(document.getElementById('ij').value,60,60);
                    gtx.fillStyle = "black";
                    drawmainG();
                    drawsf1();
                    break;
                case 28:
                    document.getElementById('curStep').innerHTML=stepArr[sec%38];
                    str+=stepArr[sec%38]+'\n';
                    ta.value=str;
                    //Code
                    gtx.clearRect(0,0,document.getElementById('mainG').width, document.getElementById('mainG').height);
                    gtx.fillStyle = "rgba(169,255,20,0.5)";
                    gtx.fillRect(580,105,5,20);
                    gtx.fillRect(435,185,40,20);
                    gtx.fillStyle = "red";
                    gtx.fillText(document.getElementById('ii').value,60,30);
                    gtx.fillText(document.getElementById('ij').value,60,60);
                    gtx.fillStyle = "black";
                    drawmainG();
                    drawsf1();
                    break;
                case 29:
                    document.getElementById('curStep').innerHTML=stepArr[sec%38];
                    str+=stepArr[sec%38]+'\n';
                    ta.value=str;
                    //Code
                    gtx.clearRect(0,0,document.getElementById('mainG').width, document.getElementById('mainG').height);
                    gtx.fillStyle = "rgba(169,255,20,0.5)";
                    gtx.fillRect(260,190,210,160);
                    gtx.fillStyle = "red";
                    gtx.fillText(document.getElementById('ii').value,60,30);
                    gtx.fillText(document.getElementById('ij').value,60,60);
                    gtx.fillStyle = "black";
                    drawmainG();
                    drawsf1();
                    break;
                case 30:
                    document.getElementById('curStep').innerHTML=stepArr[sec%38];
                    str+=stepArr[sec%38]+'\n';
                    ta.value=str;
                    //Code
                    gtx.clearRect(0,0,document.getElementById('mainG').width, document.getElementById('mainG').height);
                    gtx.fillStyle = "rgba(169,255,20,0.5)";
                    gtx.fillRect(250,310,100,20);
                    gtx.fillStyle = "red";
                    gtx.fillText(document.getElementById('ii').value,60,30);
                    gtx.fillText(document.getElementById('ij').value,60,60);
                    gtx.fillStyle = "black";
                    drawmainG();
                    drawsf1();
                    break;
                case 31:
                    document.getElementById('curStep').innerHTML=stepArr[sec%38];
                    str+=stepArr[sec%38]+'\n';
                    ta.value=str;
                    //Code
                    gtx.clearRect(0,0,document.getElementById('mainG').width, document.getElementById('mainG').height);
                    gtx.fillStyle = "rgba(169,255,20,0.5)";
                    gtx.fillRect(5,5,600,140);
                    gtx.fillStyle = "red";
                    gtx.fillText(document.getElementById('ii').value,60,30);
                    gtx.fillText(document.getElementById('ij').value,60,60);
                    gtx.fillStyle = "black";
                    drawmainG();
                    drawsf1();
                    break;
                case 32:
                    document.getElementById('curStep').innerHTML=stepArr[sec%38];
                    str+=stepArr[sec%38]+'\n';
                    ta.value=str;
                    //Code
                    gtx.clearRect(0,0,document.getElementById('mainG').width, document.getElementById('mainG').height);
                    gtx.fillStyle = "rgba(169,255,20,0.5)";
                    gtx.fillRect(5,310,240,80);
                    gtx.fillStyle = "red";
                    gtx.fillText(document.getElementById('ii').value,60,30);
                    gtx.fillText(document.getElementById('ij').value,60,60);
                    gtx.fillStyle = "black";
                    drawmainG();
                    drawsf1();
                    break;
                case 33:
                    document.getElementById('curStep').innerHTML=stepArr[sec%38];
                    str+=stepArr[sec%38]+'\n';
                    ta.value=str;
                    //Code
                    gtx.clearRect(0,0,document.getElementById('mainG').width, document.getElementById('mainG').height);
                    gtx.fillStyle = "rgba(169,255,20,0.5)";
                    gtx.fillRect(540,105,40,20);
                    gtx.fillRect(205,300,40,20);
                    gtx.fillStyle = "red";
                    gtx.fillText(document.getElementById('ii').value,60,30);
                    gtx.fillText(document.getElementById('ij').value,60,60);
                    gtx.fillStyle = "black";
                    drawmainG();
                    drawsf1();
                    break;
                case 34:
                    document.getElementById('curStep').innerHTML=stepArr[sec%38];
                    str+=stepArr[sec%38]+'\n';
                    ta.value=str;
                    //Code
                    gtx.clearRect(0,0,document.getElementById('mainG').width, document.getElementById('mainG').height);
                    gtx.fillStyle = "rgba(169,255,20,0.5)";
                    gtx.fillRect(20,355,90,20);
                    gtx.fillStyle = "red";
                    gtx.fillText(document.getElementById('ii').value,60,30);
                    gtx.fillText(document.getElementById('ij').value,60,60);
                    gtx.fillStyle = "black";
                    drawmainG();
                    drawsf1();
                    break;
                case 35:
                    document.getElementById('curStep').innerHTML=stepArr[sec%38];
                    str+=stepArr[sec%38]+'\n';
                    ta.value=str;
                    //Code
                    gtx.clearRect(0,0,document.getElementById('mainG').width, document.getElementById('mainG').height);
                    gtx.fillStyle = "rgba(169,255,20,0.5)";
                    gtx.fillRect(5,5,600,140);
                    gtx.fillStyle = "red";
                    gtx.fillText(document.getElementById('ii').value,60,30);
                    gtx.fillText(document.getElementById('ij').value,60,60);
                    gtx.fillStyle = "black";
                    drawmainG();
                    drawsf1();
                    break;
                case 36:
                    document.getElementById('curStep').innerHTML=stepArr[sec%38];
                    str+=stepArr[sec%38]+'\n';
                    ta.value=str;
                    document.getElementById("out5").style.visibility='visible';
                    //Code
                    gtx.clearRect(0,0,document.getElementById('mainG').width, document.getElementById('mainG').height);
                    gtx.fillStyle = "rgba(169,255,20,0.5)";
                    gtx.fillRect(10,105,600,20);
                    gtx.fillStyle = "red";
                    gtx.fillText(document.getElementById('ii').value,60,30);
                    gtx.fillText(document.getElementById('ij').value,60,60);
                    gtx.fillStyle = "black";
                    drawmainG();
                    drawsf1();
                    break;
                case 37:
                    document.getElementById('curStep').innerHTML=stepArr[sec%38];
                    str+=stepArr[sec%38]+'\n';
                    ta.value=str;
                    //Code
                    gtx.clearRect(0,0,document.getElementById('mainG').width, document.getElementById('mainG').height);
                    gtx.fillStyle = "red";
                    gtx.fillText(document.getElementById('ii').value,60,30);
                    gtx.fillText(document.getElementById('ij').value,60,60);
                    gtx.fillStyle = "black";
                    drawmainG();
                    drawsf1();
                    str="";
                    stop();
                    break;
            }
            sec++;
        }
    
    </script>
</html>